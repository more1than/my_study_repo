#### 死锁

在线程间共享某个资源时，如果两个线程分别占有一部分资源并且同时等待对方的资源是，就会造成死锁

##### 避免死锁

添加超时时间

#### 银行家算法

通过均分给用户资源来保证用户都不会走，再利用剩余资源分配给可完成的用户，再利用完成的用户返回的资源来分配给其他用户，从而保证客源



产生死锁的四大因素：

破坏其中一个因素就会破坏死锁

1. 互斥：共享资源只能被一个线程占用 --互斥锁

2. 占有且等待：线程当前只有至少一个资源，并且还想请求其他线程持有的其他资源就会造成等待 -- 等待对方释放资源

3. 不可抢占：资源只能由持有他的线程自愿释放，其他线程不可强行占有该资源 -- 无法释放对方的资源

4. 循环等待：线程T1等待线程T2占有的资源，线程T2等待线程T1占有的资源，就是循环等待 -- 两个线程互相等待

若出现死锁则会同时满足四大条件，破坏一个及破坏死锁

解决方案：

1. 设置锁的超时时间（解决不可抢占）
2. 用一个线程占用两个资源，让另一个线程等待第一个线程占用完再使用，可以定义函数或类操作，资源被分配添加标识标记，被释放也标记（解决占有且等待）
3. 给资源标记序号，让线程有序的获取资源（解决循环等待）
## 事务

redis单条命令是保证原子性的，redis的事务是不保证原子性的

事务的本质就是一组命令一块执行，一个事务中的所有命令都会被序列化，在事务执行过程中，会按照顺序执行

一次性，顺序性，排他性，执行一些列的命令

Redis事务没有隔离级别的概念

Redis单条命令是保存原子性的，但是事务不保证原子性



### Redis命令

```
踩坑：不要使用tab补全开启关闭事务（multi  exec），最好手动打字
```

开启事务

```bash
multi
```

命令入队

执行事务

```bash
127.0.0.1:6379> multi  # 开启事务
OK
127.0.0.1:6379> set name zhang
QUEUED
127.0.0.1:6379> get name
QUEUED
127.0.0.1:6379> exec   # 执行事务
1) OK
2) "zhang"
```



放弃事务  放弃事务后，队列中的命令都不会执行

```bash
127.0.0.1:6379> multi
OK
127.0.0.1:6379> set k1 v1
QUEUED
127.0.0.1:6379> set k2 v2
QUEUED
127.0.0.1:6379> DISCARD
OK
127.0.0.1:6379> get k1
(nil)
```



事务异常：

如果第一条命令不是因为语法问题报错了，其他的命令也可以执行成功

如果放入队列的时候就爆出了异常，那么整个队列的命令都不会被执行
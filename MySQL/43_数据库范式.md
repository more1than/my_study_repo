### 什么是数据库设计范式？

数据库表的设计依据，如何涉及数据库表

### 共有三个范式

第一范式：要求任何一张表必须有主键，每一个字段原子性不可再分

第二范式：（建立在第一范式的基础上）要求所有非主键字段完全依赖主键，不要产生部分依赖

第三范式：（建立在第二范式的基础上）要求所有非主键字段直接完全依赖主键，不要产生传递依赖

设计数据库表的时候，按照以上的范式进行，可以避免表中的数据冗余，空间的浪费



### 第一范式（最核心，最重要，所有表的设计必须要满足）1NF

必须有主键，并且每一个字段都是原子性不可再分

```
学生编号	姓名		联系方式
1	       zhang	qq@qq.com, 1333333
```

以上不遵循范式，因为联系方式还可以分为邮箱地址和电话，所以不具有原子性

```
学生编号	姓名		邮箱地址      电话
1	       zhang	qq@qq.com   1333333
```



### 第二范式（建立在第一范式基础上）2NF

要求所有非主键字段必须完全依赖主键，不要产生部分依赖

| 学生编号 | 教师编号 | 学生姓名 | 教师姓名 |
| -------- | -------- | -------- | :------- |
| 1001     | 001      | 张三     | 王老师   |
| 1002     | 002      | 李四     | 赵老师   |
| 1003     | 001      | 王五     | 王老师   |
| 1004     | 002      | 张三     | 赵老师   |

不满足第二范式，这样张三重复了，王老师也重复了，产生了数据冗余

为了满足第二范式应该这样设计

使用三张表来表示多对多的关系

学生表， 教师表，学生教师关系表

学生表

| 学生编号（PK） | 学生姓名 |
| -------------- | -------- |
| 1001           | 张三     |
| 1002           | 李四     |
| 1003           | 王五     |

教师表

| 教师编号（PK） | 教室姓名 |
| -------------- | -------- |
| 001            | 王老师   |
| 002            | 赵老师   |

学生教师关系表

| id（PK） | 学生编号（FK） | 教师编号（FK） |
| -------- | -------------- | -------------- |
| 1        | 1001           | 001            |
| 2        | 1002           | 002            |
| 3        | 1003           | 001            |
| 4        | 1001           | 002            |



### 多对多如何设计

多对多，三张表，关系表双外键！！



### 第三范式（建立在第二范式的基础上）

要求所有非主键字段必须直接依赖主键，不要实现传递依赖

| 学生编号（PK） | 学生姓名 | 班级编号 | 班级姓名 |
| -------------- | -------- | -------- | -------- |
| 1001           | 张三     | 01       | 一年一班 |
| 1002           | 李四     | 02       | 一年二班 |
| 1003           | 王五     | 03       | 一年三班 |
| 1004           | 赵六     | 03       | 一年三班 |

一年一班依赖01， 01依赖1001产生了传递依赖

不符合第三范式的要求，产生了数据冗余

**那如何实现一对多呢?**

拆分成两张表：学生表，班级表

| 班级编号（PK） | 班级名称 |
| -------------- | -------- |
| 01             | 一年一班 |
| 02             | 一年二班 |
| 03             | 一年三班 |

学生表

| 学生编号（PK） | 学生姓名 | 班级编号（FK） |
| -------------- | -------- | -------------- |
| 1001           | 张三     | 01             |
| 1002           | 李四     | 02             |
| 1003           | 王五     | 03             |
| 1004           | 赵六     | 03             |

不要产生传递依赖，解决数据冗余

#### 如何设计一对多：

一对多，两张表，多的表加外键！！



总结表的设计：

多对多：多对多，三张表，关系表双外键！！

一对多：一对多，两张表，多的表加外键！！

一对一：在实际开发中可能存在一张表字段太多，所以可能要拆分表

外键添加唯一约束，一对一，外键唯一！！
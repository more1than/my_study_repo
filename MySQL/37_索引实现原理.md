### 索引实现原理

在任何数据库上，主键都会自动添加索引对象，在mysql中，如果字段上有unique约束的话，也会自动创建索引

在任何数据库中，任何一张表的任何一条记录在硬盘存储上都有一个硬盘的物理存储编号

在mysql中，索引是一个单独的对象，不同的存储引擎以不同的形式存在，在MyISAM存储引擎中，索引存储在一个.MYI文件中，在InnoDB存储引擎中，索引存储在一个逻辑名称叫做tablespace的当追踪，在MEMORY存储引擎当中，索引被存储在内存当中，不管索引存储在哪里。索引在mysql中都是一个树的形式存在（自平衡二叉树：B-Tree）



```sql
select * from user where id = 101;
```

mysql发现id字段上有索引，会通过索引对象idIndex查找，通过idIndex索引对象定位到101，缩小索引范围，快速定位，定位到id =101后，得出物理编号：0x666，此时mysql转换sql语句

```sql
select * from user where 物理编号=0x666;
```



索引的实现原理：就是缩小扫描范围，避免全表扫描



什么条件下会考虑给字段添加索引

条件1：数据量庞大

条件2：该字段经常出现在where后

条件3：该字段很少的DML（insert delete update）操作（因为DML之后，索引需要重新排序）



不建议随意添加索引，太多反而会降低索引的性能，建议通过unique约束的字段查询或主键查询，效率较高
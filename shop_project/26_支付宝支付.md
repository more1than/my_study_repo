1.创建payment子应用

```cmd
python ..\..\manage.py startapp payment
```

2.注册app

```python
INSTALLED_APPS = [
    "payment.apps.PaymentConfig",  # 支付模块
]
```

3.model中建立模型

```python
from django.db import models

from myshop.utils.models import BaseModel
from orders.models import OrderInfo


class Payment(BaseModel):
    """支付信息"""
    order = models.ForeignKey(OrderInfo, on_delete=models.CASCADE, verbose_name="订单")
    trade_id = models.CharField(max_length=100, unique=True, null=True, blank=True, verbose_name="支付编号")

    class Meta:
        db_table = "tb_payment"
        verbose_name = "支付信息"
        verbose_name_plural = verbose_name
```

4.下载阿里支付第三方库

```
pip install python-alipay_sdk
```

5.生成公私钥

```shell
openssl
genrsa -out app_private_key.pem 2048
RSA -in app_private_key.pem -pubout -out app_public_key.pem
```

6.payment子应用中创建keys文件夹

文件夹中放入自己生成的私钥和支付宝页面上的公钥

把自己的公钥放入到支付宝页面上

在支付宝公钥前后加

```
-----BEGIN PUBLIC KEY-----
-----END PUBLIC KEY-----
```

